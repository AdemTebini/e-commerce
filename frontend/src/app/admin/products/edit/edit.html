<section class="edit-product">
	<div class="page-header">
		<h1>Modifier le Produit</h1>
		<p class="subtitle">ID du produit: {{ id }}</p>
	</div>

	<form class="product-form">
		<div class="form-grid">
			<div class="form-group">
				<label for="title">
					<span class="label-text">Titre du produit</span>
					<span class="required">*</span>
				</label>
				<input 
					id="title"
					type="text"
					[(ngModel)]="title" 
					name="title"
					placeholder="Ex: T-shirt Premium"
					required
				>
			</div>

			<div class="form-group form-group--full">
				<label for="description">
					<span class="label-text">Description</span>
				</label>
				<textarea 
					id="description"
					[(ngModel)]="description" 
					name="description"
					placeholder="D√©crivez votre produit en d√©tail..."
					rows="5"
				></textarea>
			</div>

			<div class="form-group">
				<label for="price">
					<span class="label-text">Prix (DT)</span>
					<span class="required">*</span>
				</label>
				<input 
					id="price"
					type="number" 
					[(ngModel)]="price" 
					name="price"
					placeholder="0.00"
					min="0"
					step="0.01"
					required
				>
			</div>

			<div class="form-group">
				<label for="stock">
					<span class="label-text">Stock</span>
					<span class="required">*</span>
				</label>
				<input 
					id="stock"
					type="number" 
					[(ngModel)]="stock" 
					name="stock"
					placeholder="0"
					min="0"
					required
				>
			</div>

			<div class="form-group form-group--full">
				<label>
					<span class="label-text">Images actuelles</span>
					<span class="image-count" *ngIf="currentImages.length > 0">({{ currentImages.length }} image(s))</span>
				</label>
				<div *ngIf="currentImages.length > 0" class="images-preview-grid">
					<div *ngFor="let imgUrl of currentImages; let i = index" class="image-preview-item current-image">
						<img [src]="imgUrl" alt="Image {{ i + 1 }}">
						<button type="button" class="btn-remove-image" (click)="removeCurrentImage(i)" title="Supprimer">
							‚úï
						</button>
						<div class="image-number">{{ i + 1 }}</div>
					</div>
				</div>
				<div *ngIf="currentImages.length === 0" class="no-images">
					<p>Aucune image actuelle</p>
				</div>
			</div>

			<div class="form-group form-group--full">
				<label for="newImages">
					<span class="label-text">Ajouter de nouvelles images</span>
					<span class="image-count" *ngIf="newImagePreviews.length > 0">({{ newImagePreviews.length }} nouvelle(s) image(s))</span>
				</label>
				<div class="file-input-wrapper">
					<input 
						id="newImages"
						type="file" 
						(change)="onFileChange($event)"
						accept="image/*"
						class="file-input"
						multiple
					>
					<label for="newImages" class="file-label">
						<span class="file-icon">üì∑</span>
						<span class="file-text">Choisir de nouvelles images</span>
					</label>
				</div>
				<div *ngIf="newImagePreviews.length > 0" class="images-preview-grid">
					<div *ngFor="let preview of newImagePreviews; let i = index" class="image-preview-item new-image">
						<img [src]="preview" alt="Nouvelle image {{ i + 1 }}">
						<button type="button" class="btn-remove-image" (click)="removeNewImage(i)" title="Supprimer">
							‚úï
						</button>
						<div class="image-number new-badge">Nouvelle</div>
					</div>
				</div>
			</div>
		</div>

		<div *ngIf="msg" class="message message--success">
			<span class="message-icon">‚úì</span>
			{{ msg }}
		</div>

		<div *ngIf="err" class="message message--error">
			<span class="message-icon">‚ö†</span>
			{{ err }}
		</div>

		<div class="form-actions">
			<button type="button" class="btn btn--secondary" (click)="cancel()">
				<span class="btn-icon">‚Üê</span>
				Annuler
			</button>
			<button type="button" class="btn btn--primary" (click)="save()">
				<span class="btn-icon">‚úì</span>
				Enregistrer
			</button>
		</div>
	</form>
</section>
